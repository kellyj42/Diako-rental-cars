<form method="post" action="" class="space-y-6">
  {% csrf_token %} {% if form.non_field_errors %} {% if next %}
  <input type="hidden" name="next" value="{{ next|urlencode }}" />
  {% endif %}
  <div class="p-4 bg-red-50 border border-red-300 rounded-xl text-red-700">
    {% for error in form.non_field_errors %}
    <p class="flex items-center gap-2">
      <i class="fas fa-exclamation-circle"></i>
      {{ error }}
    </p>
    {% endfor %}
  </div>
  {% endif %}

  <!-- Name Fields -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        First Name
      </label>
      <div class="relative">
        <input
          type="text"
          name="first_name"
          value="{{ form.first_name.value|default:'' }}"
          required
          class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.first_name.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
          placeholder="John"
        />
        <i
          class="fas fa-user absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"
        ></i>
      </div>
      {% if form.first_name.errors %}
      <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
        <i class="fas fa-exclamation-circle"></i>
        {{ form.first_name.errors.0 }}
      </p>
      {% endif %}
    </div>

    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        Last Name
      </label>
      <div class="relative">
        <input
          type="text"
          name="last_name"
          value="{{ form.last_name.value|default:'' }}"
          required
          class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.last_name.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
        />
        <i
          class="fas fa-user absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"
        ></i>
      </div>
      {% if form.last_name.errors %}
      <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
        <i class="fas fa-exclamation-circle"></i>
        {{ form.last_name.errors.0 }}
      </p>
      {% endif %}
    </div>
  </div>

  <!-- Email Field -->
  <div class="mb-6" id="field-email">
    <label class="block text-sm font-semibold text-gray-700 mb-2">
      Email Address
    </label>

    <div class="relative">
      <input
        type="email"
        name="email"
        value="{{ form.email.value|default:'' }}"
        class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.email.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
        placeholder="you@example.com"
      />
      <i
        class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"
      ></i>
    </div>

    {% if form.email.errors %}
    <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
      <i class="fas fa-exclamation-circle"></i>
      {{ form.email.errors.0 }}
    </p>
    {% endif %}
  </div>

  <!-- Phone Field -->
  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-2">
      Phone Number
    </label>

    <div class="flex gap-2">
      <!-- Country Code -->
      <select
        name="country_code"
        class="w-1/3 px-3 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-500"
      >
        <option value="+256" selected>ðŸ‡ºðŸ‡¬ +256</option>
        <option value="+254">ðŸ‡°ðŸ‡ª +254</option>
        <option value="+255">ðŸ‡¹ðŸ‡¿ +255</option>
        <option value="+250">ðŸ‡·ðŸ‡¼ +250</option>
        <option value="+257">ðŸ‡§ðŸ‡® +257</option>
        <option value="+211">ðŸ‡¸ðŸ‡¸ +211</option>

        <option value="+234">ðŸ‡³ðŸ‡¬ +234</option>
        <option value="+233">ðŸ‡¬ðŸ‡­ +233</option>
        <option value="+27">ðŸ‡¿ðŸ‡¦ +27</option>

        <option value="+1">ðŸ‡ºðŸ‡¸ +1</option>
        <option value="+44">ðŸ‡¬ðŸ‡§ +44</option>
        <option value="+49">ðŸ‡©ðŸ‡ª +49</option>
        <option value="+971">ðŸ‡¦ðŸ‡ª +971</option>
      </select>

      <!-- Phone Number -->
      <input
        type="tel"
        name="phone_number"
        placeholder="712345678"
        class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.email.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
      />
    </div>

    <p class="text-xs text-gray-500 mt-2">
      Select country code, then enter your phone number
    </p>
    {% if form.phone_number.errors %}
    <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
      <i class="fas fa-exclamation-circle"></i>
      {{ form.phone_number.errors.0 }}
    </p>
    {% endif %}
  </div>

  <!-- Password Field -->
  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-2">
      Password
    </label>
    <div class="relative">
      <input
        type="password"
        name="password"
        id="password1"
        value="{{ form.password.value|default:'' }}"
        required
        class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.password.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
        placeholder="Create a strong password"
        onkeyup="validatePassword()"
      />
      <i
        class="fas fa-key absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"
      ></i>
      <button
        type="button"
        onclick="togglePassword('password1', 'toggleIcon1')"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
      >
        <i class="fas fa-eye" id="toggleIcon1"></i>
      </button>
    </div>

    <!-- Password Strength -->
    <div class="mt-3">
      <div class="flex justify-between items-center mb-1">
        <span class="text-xs text-gray-500">Password strength:</span>
        <span id="passwordStrength" class="text-xs font-semibold">None</span>
      </div>
      <div class="w-full bg-gray-200 rounded-full h-2">
        <div
          id="passwordStrengthBar"
          class="h-2 rounded-full transition-all duration-300"
          style="width: 0%"
        ></div>
      </div>
    </div>
    {% if form.password.errors %}
    <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
      <i class="fas fa-exclamation-circle"></i>
      {{ form.password.errors.0 }}
    </p>
    {% endif %}
  </div>

  <!-- Confirm Password Field -->
  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-2">
      Confirm Password
    </label>
    <div class="relative">
      <input
        type="password"
        name="password2"
        value="{{ form.password2.value|default:'' }}"
        id="password2"
        required
        class="w-full px-4 py-3 pl-11 rounded-xl border {% if form.password2.errors %} border-red-500 bg-red-50 {% else %} border-gray-300 {% endif %} focus:ring-2 focus:ring-blue-500 focus:outline-none transition"
        placeholder="Re-enter your password"
        onkeyup="checkPasswordMatch()"
      />
      <i
        class="fas fa-lock absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"
      ></i>
      <button
        type="button"
        onclick="togglePassword('password2', 'toggleIcon2')"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"
      >
        <i class="fas fa-eye" id="toggleIcon2"></i>
      </button>
    </div>
    <div id="passwordMatch" class="mt-2 text-sm">
      <!-- Password match status will appear here -->
    </div>
    {% if form.password2.errors %}
    <p class="mt-2 text-sm text-red-600 flex items-center gap-2">
      <i class="fas fa-exclamation-circle"></i>
      {{ form.password2.errors.0 }}
    </p>
    {% endif %}
  </div>

  <!-- Terms and Conditions -->
  <div class="flex items-start">
    <input
      type="checkbox"
      id="terms"
      name="terms"
      required
      class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mt-1 mr-3"
    />
    <label for="terms" class="text-sm text-gray-600">
      I agree to the
      <a href="#" class="text-blue-600 hover:underline font-medium"
        >Terms of Service</a
      >
      and
      <a href="#" class="text-blue-600 hover:underline font-medium"
        >Privacy Policy</a
      >. I understand that Daiko may contact me regarding my account and
      bookings.
    </label>
  </div>

  <!-- Newsletter Opt-in -->
  <div class="flex items-start">
    <input
      type="checkbox"
      id="newsletter"
      name="newsletter"
      class="w-4 h-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mt-1 mr-3"
    />
    <label for="newsletter" class="text-sm text-gray-600">
      Send me travel tips, special offers, and updates from Daiko. I can
      unsubscribe anytime.
    </label>
  </div>

  <!-- Form Errors -->

  <!-- Submit Button -->
  <button
    type="submit"
    id="submitBtn"
    class="w-full bg-linear-to-r from-orange-400 to-orange-500 hover:from-orange-500 hover:to-orange-600 text-white font-semibold py-3.5 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:transform-none"
  >
    <i class="fas fa-user-plus mr-2"></i>
    Create My Account
  </button>
</form>
